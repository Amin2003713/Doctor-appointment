@page "/login"
@using AppointmentPlanner.Client.Services.Auth
@using AppointmentPlanner.Shared.Dtos
@inject AuthService Auth

<MudPaper Class="pa-6 mx-auto mt-12" Style="max-width:420px" Elevation="8" dir="rtl">
    <MudText Typo="Typo.h5" Class="mb-4">ورود</MudText>

    <MudTextField @bind-Value="LoginDto.Email" Label="ایمیل" Required="true"/>
    <MudTextField @bind-Value="LoginDto.Password" Label="رمز عبور" InputType="InputType.Password" Required="true"/>
    <MudButton OnClick="DoLogin" Color="Color.Primary" Variant="Variant.Filled" Class="mt-4" FullWidth="true">ورود
    </MudButton>

    @if (!string.IsNullOrEmpty(Message))
    {
        <MudAlert Severity="Severity.Error" Class="mt-3">@Message</MudAlert>
    }
</MudPaper>

@code {
    string Message  = "";
    public LoginDto LoginDto { get; set; } = new();

    async Task DoLogin()
    {
        var ok = await Auth.LoginAsync(LoginDto);
        if (!ok) Message = "ورود ناموفق بود!";
    }

}